### YamlMime:FAQ
metadata:
  title: Azure Cosmos DB のポイントインタイム リストア機能についてよく寄せられる質問。
  description: この記事では、継続的バックアップ モードを使用することで実現する Azure Cosmos DB のポイントインタイム リストア機能についてよく寄せられる質問を示します。
  author: kanshiG
  ms.service: cosmos-db
  ms.topic: conceptual
  ms.date: 02/01/2021
  ms.author: govindk
  ms.reviewer: sngun
  ms.openlocfilehash: af2598161c1fe6b2c28541877a40709948cbb913
  ms.sourcegitcommit: 02d443532c4d2e9e449025908a05fb9c84eba039
  ms.translationtype: HT
  ms.contentlocale: ja-JP
  ms.lasthandoff: 05/06/2021
  ms.locfileid: "111907539"
title: Azure Cosmos DB のポイントインタイム リストア機能 (プレビュー) についてよく寄せられる質問
summary: >
  [!INCLUDE[appliesto-sql-mongodb-api](includes/appliesto-sql-mongodb-api.md)]


  > [!IMPORTANT]

  > Azure Cosmos DB のポイントインタイム リストア機能 (継続的バックアップ モード) は、現在、パブリック プレビュー段階にあります。

  > このプレビュー バージョンはサービス レベル アグリーメントなしで提供されています。運用環境のワークロードに使用することはお勧めできません。 特定の機能はサポート対象ではなく、機能が制限されることがあります。

  > 詳しくは、[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)に関するページをご覧ください。


  この記事では、継続的バックアップ モードを使用することで実現する Azure Cosmos DB のポイントインタイム リストア機能 (プレビュー) についてよく寄せられる質問を示します。
sections:
- name: 無視
  questions:
  - question: >
      復元にはどのくらいの時間がかかりますか?
    answer: >
      復元時間は、データのサイズによって決まります。
  - question: >
      復元時刻をローカル時刻で送信できますか?
    answer: >
      データベースやコンテナーなどの主要リソースがその時点で存在していたかどうかによっては、復元が行われない場合があります。 確認するには、時刻を入力し、指定した時刻について、選択したデータベースまたはコンテナーを調べます。 復元するリソースが存在しない場合、復元プロセスは機能しません。
  - question: >
      アカウントが復元されているかどうかは、どのようにして追跡できますか?
    answer: "復元コマンドを送信して、同じページで待機します。操作が完了すると、ステータス バーに、アカウントが正常に復元されたというメッセージが表示されます。 また、復元されたアカウントを検索し、[復元されているアカウントの状態を追跡する](continuous-backup-restore-portal.md#track-restore-status)こともできます。 復元の進行中は、アカウントの状態は *Creating* (作成中) になります。復元操作が完了すると、アカウントの状態は *Online* (オンライン) に変わります。\n\n同様に、PowerShell と CLI では、次のように `az cosmosdb show` コマンドを実行して、復元操作の進行状況を追跡できます。\n\n```azurecli-interactive\naz cosmosdb show --name \"accountName\" --resource-group \"resourceGroup\"\n```\n\nアカウントがオンラインになっている場合、provisioningState には *Succeeded* (成功) と表示されます。\n\n```json\n{\n\"virtualNetworkRules\": [],\n\"writeLocations\" : [\n{\n    \"documentEndpoint\": \"https://<accountname>.documents.azure.com:443/\", \n    \"failoverpriority\": 0,\n    \"id\": \"accountName\" ,\n    \"isZoneRedundant\" : false, \n    \"locationName\": \"West US 2\", \n    \"provisioningState\": \"Succeeded\"\n}\n]\n}\n```\n"
  - question: >
      アカウントが別のアカウントから復元されたかどうかを確認するにはどうすればよいですか?
    answer: >
      `az cosmosdb show` コマンドを実行します。出力で、`createMode` プロパティの値を確認できます。 値が **Restore** に設定されている場合は、 アカウントが別のアカウントから復元されたことを示しています。 `restoreParameters` プロパティには、ソース アカウント ID を持つ `restoreSource` などの詳細があります。 `restoreSource` パラメーターの最後の GUID は、ソース アカウントの instanceId です。


      たとえば、次の出力では、ソース アカウントのインスタンス ID は *7b4bb-f6a0-430e-ade1-638d781830cc* になります。


      ```json

      "restoreParameters": {
         "databasesToRestore" : [],
         "restoreMode": "PointInTime",
         "restoreSource": "/subscriptions/2a5b-f6a0-430e-ade1-638d781830dd/providers/Microsoft.DocumentDB/locations/westus/restorableDatabaseAccounts/7b4bb-f6a0-430e-ade1-638d781830cc",
         "restoreTimestampInUtc": "2020-06-11T22:05:09Z"
      }

      ```
  - question: >
      共有スループット データベース、または共有スループット データベース内のコンテナーを復元するとどうなりますか?
    answer: >
      共有スループット データベース全体が復元されます。 共有スループット データベース内のコンテナーのサブセットを復元用に選択することはできません。
  - question: >
      アカウント定義で InstanceID はどのように使用されますか?
    answer: "いかなる時点においても、Azure Cosmos DB アカウントの `accountName` プロパティは、それが有効な間はグローバルに一意です。 ただし、アカウントが削除された後は、同じ名前で別のアカウントを作成することが可能です。したがって、\"accountName\" はアカウントのインスタンスを識別するのに十分ではなくなります。 \n\nID または `instanceId` はアカウントのインスタンスのプロパティです。これは、複数のアカウント (ライブおよび削除済み) で復元用に同じ名前が使用されている場合に、それらを明確に区別するために使用されます。 インスタンス ID を取得するには、`Get-AzCosmosDBRestorableDatabaseAccount` または `az cosmosdb restorable-database-account` コマンドを実行します。 name 属性の値は \"InstanceID\" を表します。\n"
additionalContent: "\n## <a name=\"next-steps\"></a>次のステップ\n\n* [継続的バックアップ](continuous-backup-restore-introduction.md) モードとは\n* [Azure portal](continuous-backup-restore-portal.md)、[PowerShell](continuous-backup-restore-powershell.md)、[CLI](continuous-backup-restore-command-line.md)、または [Azure Resource Manager](continuous-backup-restore-template.md) を使用して、継続的バックアップを構成および管理します。\n* 継続的バックアップ モードでデータを復元するために必要な[アクセス許可を管理](continuous-backup-restore-permissions.md)します。\n* [継続的バックアップ モードのリソース モデル](continuous-backup-restore-resource-model.md)"
