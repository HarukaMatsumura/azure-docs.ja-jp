---
title: カタログのアクセス許可 (プレビュー)
description: この記事では、Azure Purview でロールベースのアクセス制御 (RBAC) を構成する方法の概要について説明します。
author: viseshag
ms.author: viseshag
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: conceptual
ms.date: 08/18/2020
ms.openlocfilehash: 06ed84bf63f79087efef33b1061e21b61315e78e
ms.sourcegitcommit: 47fac4a88c6e23fb2aee8ebb093f15d8b19819ad
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/26/2021
ms.locfileid: "122969466"
---
# <a name="access-control-in-azure-purview"></a>Azure Purview でのアクセスの制御

Azure Purview では、**コレクション** を使用して、ソース、資産、その他の成果物全体のアクセスを整理および管理します。 この記事では、Azure Purview アカウントでのコレクションとアクセス管理について説明します。

> [!NOTE]
> 現時点では、この情報は、**2021 年8 月 18 日以降** に作成された Purview アカウントにのみ適用されます。 8 月 18 日より前に作成されたインスタンスでもコレクションを作成できますが、これらのコレクションでアクセス許可を管理することはできません。 8 月 18 日より前に作成された Purview インスタンスのアクセスの制御については、ページの下部にある [**従来のアクセス許可ガイド**](#legacy-permission-guide)を参照してください。
>
> すべてのレガシ アカウントは、今後数週間以内に自動的にアップグレードされます。 Purview アカウントがアップグレードされると、メールで通知が届きます。 アカウントがアップグレードされた場合、割り当てられたすべてのアクセス許可が自動的にルート コレクションに再デプロイされます。 その際、アクセス許可は、アクセスの制御 (IAM) ではなく、コレクションで管理する必要があります。 IAM アクセス許可は Purview 成果物には適用されなくなりました。

## <a name="collections"></a>コレクション

コレクションは、資産、ソース、その他の成果物を階層にグループ化して検出可能性を高め、アクセスの制御を管理するために Azure Purview が使用するツールです。 Purview のリソースへのすべてのアクセスは、Purview アカウント自体のコレクションから管理されます。

## <a name="roles"></a>ロール

Azure Purview では、定義済みのロールのセットを使用して、アカウント内で誰が何にアクセスできるかを制御します。 現時点でのこれらのロールは次のとおりです。

- **コレクション管理者** - Purview コレクションとその詳細を編集し、サブコレクションを追加できます。 自分が管理者であるコレクションの他の Purview ロールにユーザーを追加することもできます。
- **データ ソース管理者** - データ ソースとデータ スキャンを管理できます。
- **データ キュレーター** - カタログ データ資産を作成、読み取り、変更、削除し、資産間のリレーションシップを確立できます。
- **データ リーダー** - カタログ データ資産にアクセスできますが、変更はできません。

## <a name="who-should-be-assigned-to-what-role"></a>ロールに割り当てられるユーザー

|ユーザー シナリオ|適切なロール|
|-------------|-----------------|
|資産を検索するのみで、何も編集する必要がない|データ リーダー|
|資産に関する情報の編集、分類の割り当て、用語集エントリへの関連付けなどを行う必要がある。|データ キュレーター|
|用語集を編集するか、新しい分類の定義を設定する必要がある|データ キュレーター|
|アプリケーションのサービス プリンシパルが Azure Purview にデータをプッシュする必要がある|データ キュレーター|
|Purview Studio を使用してスキャンを設定する必要がある|データ ソース管理者と、少なくとも、ソースが登録されているコレクションのデータ閲覧者 **または** データ キュレーター。|
|サービス プリンシパルまたはグループがカタログの情報にアクセスすることを許可せずに、Azure Purview でスキャンを設定し、監視する必要がある |データ ソース管理者|
|Azure Purview のロールにユーザーを割り当てる必要がある | コレクション管理者 |

:::image type="content" source="./media/catalog-permissions/collection-permissions-roles.png" alt-text="Purview ロールを示すグラフ" lightbox="./media/catalog-permissions/collection-permissions-roles.png":::

## <a name="understand-how-to-use-azure-purviews-roles-and-collections"></a>Azure Purview のロールとコレクションを使用する方法を理解する

すべてのアクセスの制御は、Purview のコレクションで管理されます。 Purview のコレクションは、[Purview Studio で確認できます](use-purview-studio.md)。 [Azure portal](https://portal.azure.com) で Purview アカウントを開き、[概要] ページで [Purview Studio] タイルを選択します。 そこから、左側のメニューのデータ マップに移動し、[コレクション] タブを選択します。

Azure Purview アカウントが作成されると、Purview アカウント自体と同じ名前のルート コレクションで始まります。 Purview アカウントの作成者は、このルート コレクションのコレクション管理者、データ ソース管理者、データ キュレーター、データ リーダーとして自動的に追加され、このコレクションを編集および管理できます。

ソース、資産、およびオブジェクトは、このルート コレクションに直接追加できますが、他のコレクションにも追加できます。 コレクションを追加すると、Purview アカウント全体でデータにアクセスできるユーザーをより細かく制御できます。

他のすべてのユーザーは、自分または自分が所属するグループに上記のロールのいずれかが与えられている場合にのみ、Azure Purview アカウント内の情報にアクセスできます。 つまり、作成者が[コレクション内の上記のロールの 1 つ以上に追加](how-to-create-and-manage-collections.md#add-role-assignments)されるまで、Azure Purview アカウントの作成時には、作成者のみがアカウントにアクセスしてその API を使用できます。

ユーザーは、コレクション管理者またはアクセス許可の継承によってのみコレクションに追加できます。 親コレクションのアクセス許可は、そのサブコレクションによって自動的に継承されます。 ただし、任意のコレクションに対して[アクセス許可の継承を制限](how-to-create-and-manage-collections.md#restrict-inheritance)することができます。 これを行った場合、そのサブコレクションは親コレクションから権限を継承しなくなるため、直接追加する必要があります。ただし、親コレクションから自動的に継承されたコレクション管理は削除できません。

## <a name="assign-permissions-to-your-users"></a>ユーザーにアクセス許可を割り当てる

Azure Purview アカウントを作成したら、まずコレクションを作成し、それらのコレクション内のロールにユーザーを割り当てます。

### <a name="create-collections"></a>コレクションを作成する

コレクションは、Purview アカウント内のソースの構造に合わせてカスタマイズでき、これらのリソースの整理されたストレージ ビンのように動作できます。 必要なコレクションについて検討する際は、ユーザーがどのように情報にアクセスまたは検出するかを検討する必要があります。 ソースは部門別に分かれていますか? これらの部門内に、一部の資産のみを検出する必要がある特殊なグループはありますか? すべてのユーザーが検出可能なソースはありますか?

これにより、データ マップを最も効果的に整理するために必要なコレクションとサブコレクションが通知されます。

新しいコレクションは、ドロップダウンから親コレクションを選択してデータ マップに直接追加することも、親からサブコレクションとして追加することもできます。 データ マップ ビューでは、すべてのソースと資産がコレクション順に表示され、一覧にソースのコレクションが一覧表示されます。

詳細な手順と情報については、[コレクションの作成と管理に関するガイド](how-to-create-and-manage-collections.md)に従ってください。

#### <a name="a-collections-example"></a>コレクションの例

コレクション、アクセス許可、および機能の基本を理解したところで、例を見てみましょう。

:::image type="content" source="./media/catalog-permissions/collection-example.png" alt-text="リージョンと部門別に分けられたサンプル コレクション階層を示すグラフ。" border="true":::

これは、組織がデータを構造化する 1 つの方法です。ルート コレクション (この例では Contoso) から始まり、コレクションは、リージョンに編成され、次に部門とサブ部門に編成されます。 データ ソースと資産をこれらのコレクションに追加して、これらのリージョンと部門別にデータ リソースを整理し、それらの行に沿ってアクセスの制御を管理することができます。 厳密なアクセス ガイドラインを持つ Revenue というサブ部門が 1 つあるので、アクセス許可を厳密に管理する必要があります。

[データ リーダー ロールは](#roles)、カタログ内の情報にアクセスできますが、管理や編集はできません。 したがって、上記の例では、ルート コレクションのグループにデータ リーダー アクセス許可を追加し、継承を許可すると、そのグループ内のすべてのユーザーに Purview ソースと資産に対するアクセス許可が付与されます。 これにより、そのグループ内のすべてのユーザーはこれらのリソースを検出できるようになりますが、編集はできません。 Revenue グループの[継承を制限](how-to-create-and-manage-collections.md#restrict-inheritance)すると、それらの資産へのアクセスが制御されます。 収益情報にアクセスする必要があるユーザーは、Revenue コレクションに個別に追加できます。
データ キュレーターとデータ ソース管理者ロールと同様に、これらのグループのアクセス許可は、割り当てられているコレクションから開始され、継承を制限していないサブコレクションに徐々に適用されます。 以下では、Americas サブコレクションのコレクション レベルで複数のグループにアクセス許可を割り当てています。

:::image type="content" source="./media/catalog-permissions/collection-permissions-example.png" alt-text="アクセス許可の分布を示すリージョンと部門別に分けられたサンプル コレクション階層を示すグラフ。" border="true":::

### <a name="add-users-to-roles"></a>ユーザーをロールに割り当てる

ロールの割り当ては、コレクションで管理されます。 [コレクション管理者ロール](#roles)を持つユーザーだけが、そのコレクションの他のユーザーにアクセス許可を付与できます。 新しいアクセス許可を追加する必要がある場合、コレクション管理者は Purview Studio にアクセスし、データ マップ、[コレクション] タブの順に移動して、ユーザーを追加する必要があるコレクションを選択します。 [ロールの割り当て] タブから、アクセス許可を必要とするユーザーを追加および管理できます。

詳細な手順については、[ロールの割り当てを追加する方法に関するガイド](how-to-create-and-manage-collections.md#add-role-assignments)を参照してください。

## <a name="legacy-permission-guide"></a>レガシ アクセス許可ガイド

> [!NOTE]
> このレガシ コレクション ガイドは、2021 年 8 月 18 日より前に作成された Purview アカウント専用です。 その後に作成されたインスタンスは、上記のガイドに従う必要があります。

この記事では、8 月 18 日より前に作成された Purview リソースに対して Azure Purview の[データ プレーン](../azure-resource-manager/management/control-plane-and-data-plane.md#data-plane)でロールベースのアクセスの制御 (RBAC) を実装する方法について説明します。

> [!IMPORTANT]
> Purview アカウントを作成したプリンシパルには、そのデータ プレーンのロールに関係なく、すべてのデータ プレーンのアクセス許可が自動的に付与されます。 他のユーザーが Azure Purview で何かを実行するには、定義済みのデータ プレーン ロールの少なくとも 1 つに割り当てられている必要があります。

### <a name="azure-purviews-pre-defined-legacy-data-plane-roles"></a>Azure Purview の定義済みのレガシ データ プレーン ロール

Azure Purview には定義済みのデータ プレーン ロールのセットが用意されており、Azure Purview で誰が何にアクセスできるかを制御するのに使用できます。 これらのロールは次のとおりです。

* **Purview データ閲覧者ロール** - Purview ポータルにアクセスでき、スキャン バインディングを除く Azure Purview のすべてのコンテンツを読み取ることができます。
* **Purview データ キュレーター ロール** - Purview ポータルにアクセスでき、スキャン バインディングを除く Azure Purview のすべてのコンテンツを読み取ることができます。また、資産に関する情報の編集、分類の定義や用語集の用語の編集、分類や用語の資産への適用もできます。
* **Purview データ ソース管理者ロール** - Purview ポータルにはアクセスできません (アクセスするには、データ閲覧者またはデータ キュレーターのロールも必要です)。Azure Purview にデータをスキャンする際にあらゆる側面を管理できますが、スキャンに関連するもの以外は、Azure Purview のコンテンツの読み取りおよび書き込みができません。

### <a name="understand-how-to-use-azure-purviews-legacy-data-plane-roles"></a>Azure Purview のレガシ データ プレーン ロールを使用する方法を理解する

Azure Purview アカウントの作成時、作成者は Purview データ キュレーターと Purview データ ソース管理者の両方のロールに含まれているものとして扱われます。 ただし、アカウント作成者はロール ストア内のこれらのロールには割り当てられせん。 Azure Purview により、プリンシパルはアカウントの作成者であることが認識され、ID に基づいてこれらの能力がそれらに拡張されます。

他のすべてのユーザーは、これらのロールの少なくとも 1 つに配置されている場合にのみ、Azure Purview アカウントを使用できます。 つまり、前に定義されたロールの 1 つ以上に割り当てられるまで、Azure Purview アカウントの作成時には、作成者のみがアカウントへのアクセスとその API の使用を実行できます。

Purview データ ソース管理者ロールでは、2 つのシナリオがサポートされます。 最初のシナリオは、スキャンを作成できる必要もある Purview データ閲覧者または Purview データ キュレーターに既に割り当てられているユーザーの場合です。 これらのユーザーは、少なくとも、Purview データ閲覧者または Purview データ キュレーターであるとともに、Purview データ ソース管理者ロールにも割り当てられている必要があります。

Purview データ ソース管理者のもう 1 つのシナリオは、スキャンを設定して監視する必要があるが、カタログのデータにはアクセスできない、プログラムによるプロセス (サービス プリンシパルなど) のシナリオです。

このシナリオを実装するには、他の 2 つのロールのいずれにも割り当てずに、サービス プリンシパルを Purview データ ソース管理者ロールに割り当てます。 プリンシパルは Purview ポータルにはアクセスできませんが、問題はありません。 これはプログラム プリンシパルであり、API 経由でのみ通信するためです。

### <a name="putting-users-into-legacy-roles"></a>レガシ ロールへのユーザーの割り当て

Azure Purview アカウントを作成した後に最初にすることは、ユーザーをこれらのロールに割り当てることです。

ロールの割り当ては [Azure の RBAC](../role-based-access-control/overview.md) で管理されます。

ユーザー ロールを割り当てることができるのは、Azure に組み込まれている 2 つのコントロール プレーン ロール、つまり所有者またはユーザーアクセス管理者だけです。 そのため、ユーザーをこれらの Azure Purview のロールに割り当てるには、所有者またはユーザー アクセス管理者を見つけるか、自分がそのいずれかになる必要があります。

#### <a name="an-example-of-assigning-someone-to-a-legacy-role"></a>ユーザーをレガシ ロールに割り当てる例

1. https://portal.azure.com にアクセスし、Azure Purview アカウントに移動します。
1. 左側の [アクセス制御 (IAM)] をクリックします。
1. 次に、[こちら](../role-based-access-control/quickstart-assign-role-user-portal.md#create-a-resource-group)に記載されている一般的な手順に従います。

### <a name="legacy-role-definitions-and-actions"></a>レガシ ロールの定義とアクション

ロールはアクションのコレクションとして定義されます。 ロールの定義方法の詳細については、[こちら](../role-based-access-control/role-definitions.md)を参照してください。 Azure Purview のロールのロール定義については、[こちら](../role-based-access-control/built-in-roles.md)を参照してください。

### <a name="getting-added-to-a-legacy-data-plane-role-in-an-azure-purview-account"></a>Azure Purview アカウントでのレガシ データ プレーン ロールへの追加

Azure Purview アカウントへのアクセス権を付与され、そのスタジオを使用する、またはその API を呼び出すことができるようになるには、Azure Purview データ プレーン ロールに追加してもらう必要があります。 これを行うことができるのは、Azure Purview アカウントの所有者またはユーザー アクセス管理者であるユーザーだけです。 ほとんどのユーザーの場合、次の手順は、アクセス権を付与できるユーザーを見つけるのを手助けしてくれる、ローカル管理者を見つけることです。

会社の [Azure portal](https://portal.azure.com) にアクセスできるユーザーの場合は、参加する Azure Purview アカウントを見つけ、その [アクセス制御 (IAM)] タブをクリックして、所有者またはユーザー アクセス管理者 (UAA) が誰かを確認します。 ただし、Azure Active Directory グループまたはサービス プリンシパルが所有者または UAA となっている場合があります。その場合、直接連絡することはできません。 代わりに、支援してくれる管理者を見つける必要があります。

### <a name="legacy---who-should-be-assigned-to-what-role"></a>レガシ - ロールに割り当てられるユーザー

|ユーザー シナリオ|適切なロール|
|-------------|-----------------|
|資産を検索するのみで、何も編集する必要がない|Purview データ閲覧者ロール|
|資産に関する情報の編集、それらに対する分類の設定、用語集エントリへの関連付けなどを行う必要がある|Purview データ キュレーター ロール|
|用語集を編集するか、新しい分類の定義を設定する必要がある|Purview データ キュレーター ロール|
|アプリケーションのサービス プリンシパルが Azure Purview にデータをプッシュする必要がある|Purview データ キュレーター ロール|
|Purview Studio を使用してスキャンを設定する必要がある|Purview データ ソース管理者ロールに加え、Purview データ閲覧者ロールまたは Purview データ キュレーター ロール|
|サービス プリンシパルまたは他のプログラムの ID を有効にして、Azure Purview でのスキャンを設定し、監視する必要がある (プログラムの ID にはカタログ情報へのアクセスを許可しない) |Purview データ ソース管理者ロール|
|Azure Purview のロールにユーザーを割り当てる必要がある | 所有者またはユーザー アクセス管理者 |

:::image type="content" source="./media/catalog-permissions/collection-permissions-roles-legacy.png" alt-text="Purview レガシ ロールを示すグラフ" lightbox="./media/catalog-permissions/collection-permissions-roles-legacy.png":::

## <a name="next-steps"></a>次の手順

コレクションとアクセスの制御の基本を理解したところで、以下のガイドに従ってこれらのコレクションを作成および管理するか、Purview リソースへのソースの登録を開始します。

- [コレクションを作成して管理する方法](how-to-create-and-manage-collections.md)
- [Purview でサポートされているデータ ソース](purview-connector-overview.md)
