---
title: セマンティック検索
titleSuffix: Azure Cognitive Search
description: 検索結果をより直観的にするために Cognitive Search でどのように Bing のディープ ラーニングのセマンティック検索モデルが使用されているかについて学習します。
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 07/21/2021
ms.custom: references_regions
ms.openlocfilehash: 1b50fbbdd38d1bb24c1732c465784c3ddb757e3f
ms.sourcegitcommit: 7d63ce88bfe8188b1ae70c3d006a29068d066287
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/22/2021
ms.locfileid: "114454784"
---
# <a name="semantic-search-in-azure-cognitive-search"></a>Azure Cognitive Search でのセマンティック検索

> [!IMPORTANT]
> セマンティック検索はパブリック プレビュー段階にあり、[追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)の下で提供されます。 Azure portal、プレビュー REST API、ベータ版 SDK から利用できます。 これらの機能は課金対象です。 詳細については、「[可用性と料金](semantic-search-overview.md#availability-and-pricing)」を参照してください。

セマンティック検索は、検索結果にセマンティックの関連性と言語理解を取り込むクエリ関連機能のコレクションです。 この記事はセマンティック検索全体の概要紹介になっています。各特徴とそれらが集まってどのように機能するかについて説明します。 埋め込まれている動画では、このテクノロジについて説明しています。終わりのセクションでは販売状況と価格について説明しています。

セマンティック検索はプレミアム機能です。 最初にこの記事を読んで基礎知識を得ることをお勧めしますが、それはかまわないのですぐに使いたいという方は、これらの手順を実行してください。

> [!div class="checklist"]
> * [リージョンおよびサービス レベルに関する要件を確認します](#availability-and-pricing)。
> * [プレビュー プログラムに登録します](https://aka.ms/SemanticSearchPreviewSignup)。 要求の処理には、最大で 2 営業日かかります。
> * 受け入れが済み次第、[セマンティック キャプションとハイライトを返す](semantic-how-to-query-request.md)ようにクエリを作成または修正します。
> * クエリにプロパティをいくつか追加して、[セマンティック回答](semantic-answers.md)も返すようにします。
> * 必要に応じて、[スペル チェック](speller-how-to-add.md) を呼び出し、精度とリコールを最大化します。

## <a name="what-is-semantic-search"></a>セマンティック検索とは

セマンティック検索は、検索結果の品質を向上させる機能のコレクションです。 検索サービスで有効にすると、クエリの実行パイプラインに 2 つの機能が追加されます。 1 つ目として、最初の結果セットに対する二次ランク付けが追加され、セマンティック的に最も関連性の高い結果が一覧の先頭にレベル上げされます。 2 つ目として、キャプションと回答が抽出されて応答で返されます。これを検索ページにレンダリングして、ユーザーの検索エクスペリエンスを向上させることができます。

## <a name="how-semantic-ranking-works"></a>セマンティック ランク付けのしくみ

"*セマンティックの順位付け*" では、用語のコンテキストと関連性が検索され、クエリにとってより意味のある一致が昇格されます。 言語理解では、コンテンツを解析して概要、または "*キャプション*" と "*回答*" を用意し、それを応答に含めます。これを検索結果ページに反映させれば検索の生産性を高めることができます。

概要作成と順位付けには、最先端の事前トレーニング済みモデルが使用されます。 ユーザーが検索に期待する高速なパフォーマンスを維持するために、セマンティック ベースの概要作成とランク付けは、 [既定の類似性スコアリング アルゴリズム](index-similarity-and-scoring.md#similarity-ranking-algorithms)のスコアに従って上位 50 件の結果にのみ適用されます。 セマンティック ランク付けでは、これらの結果をドキュメントのコーパスとして使用して、一致のセマンティック強度に基づいて結果を再スコアリングします。

テクノロジは Bing と Microsoft Research が基になっており、Cognitive Search インフラストラクチャにアドオン機能として統合されます。 研究と AI 投資でバックアップされるセマンティック検索に関する詳細については、「[Bing の AI が Azure Cognitive Search にパワーを与えるしくみ (Microsoft Research ブログ)](https://www.microsoft.com/research/blog/the-science-behind-semantic-search-how-ai-from-bing-is-powering-azure-cognitive-search/)」を参照してください。

次の動画では、機能の概要について説明しています。

> [!VIDEO https://www.youtube.com/embed/yOf0WfVd_V0]

## <a name="features-in-semantic-search"></a>セマンティック検索の機能

セマンティック検索を使用すると、次の新機能によって精度とリコールが向上します。

| 機能 | 説明 |
|---------|-------------|
| [スペル チェック](speller-how-to-add.md) | クエリ用語が検索エンジンに到達する前に入力ミスを修正します。 |
| [セマンティック ランク付け](semantic-ranking.md) | コンテキストまたはセマンティックの意味を利用して新しい関連スコアを計算します。 |
| [セマンティック キャプションとハイライト](semantic-how-to-query-request.md) | 内容を最もよくまとめる文とフレーズをドキュメントから抽出し、スキャンを簡単にするために重要な節を強調表示します。 結果を要約するキャプションは、個々のコンテンツ フィールドが結果ページに対して高密度である場合に便利です。 強調表示されたテキストにより、最も関連性の高い用語とフレーズが目立つため、ユーザーはその一致が関連していると見なされた理由を迅速に判断できます。 |
| [セマンティック回答](semantic-answers.md) | セマンティック クエリから返される省略可能な追加のサブ構造体。 これにより、質問のようなクエリに直接回答することができます。 |

### <a name="order-of-operations"></a>演算の順序

セマンティック検索のコンポーネントでは、既存のクエリ実行パイプラインが双方向に拡張されます。 スペル修正を有効にすると、用語が検索エンジンに到達する前に、[スペル チェック](speller-how-to-add.md)によってクエリ開始時の入力ミスが修正されます。

:::image type="content" source="media/semantic-search-overview/semantic-workflow.png" alt-text="クエリ実行のセマンティック コンポーネント" border="true":::

クエリ実行は通常どおりに進行し、逆インデックスに関する用語の解析、分析、スキャンが行われます。 エンジンでは、トークン照合を使用してドキュメントを取得し、 [既定の類似性スコアリング アルゴリズム](index-similarity-and-scoring.md#similarity-ranking-algorithms)を使用して結果をスコア付けします。 スコアは、クエリ用語とインデックス内の一致する用語との言語的類似性の度合いに基づいて計算されます。 定義されている場合、この段階で、スコアリング プロファイルも適用されます。 その後、結果はセマンティック検索サブシステムに渡されます。

準備ステップでは、最初の結果セットから返されたドキュメント コーパスが文と段落のレベルで分析され、各ドキュメントを要約する節が検索されます。 キーワード検索とは対照的に、このステップでは機械読解を使用して内容を評価します。 コンテンツ処理のこの段階全体で、セマンティック クエリによって[キャプション](semantic-how-to-query-request.md)と[回答](semantic-answers.md)が返されます。 それらを作成するために、セマンティック検索では言語表現を利用し、結果を最もよくまとめる重要な節が抽出され、強調表示されます。 検索クエリが質問であり、回答が要求されると、検索クエリで表された質問に最適な回答を与えるテキスト節も応答に含まれます。 

キャプションと回答の両方について、作成には既存のテキストが使用されます。 セマンティック モデルでは、使用可能な内容から新しい文やフレーズを作成したり、新しい結論に達するロジックを適用したりすることはありません。 つまり、存在していない内容が返されることはありません。

次に、クエリ用語の[概念的類似性](semantic-ranking.md) に基づいて結果が再スコアリングされます。

クエリでセマンティック機能を使用するには、[検索要求](semantic-how-to-query-request.md)を少し変更する必要がありますが、追加の構成やインデックスの再作成は不要です。

## <a name="semantic-capabilities-and-limitations"></a>セマンティック機能と制限

セマンティック検索は新しいテクノロジなので、実行できることとできないことについての期待値を設定することが重要です。 これにより、2 つの方法で検索結果の品質が向上します。

* 1 つ目として、セマンティック的に元のクエリの意図に近い一致がレベル上げされます。

* 2 つ目として、キャプションや場合によっては回答がページにある場合に、結果が使いやすくなります。

セマンティック検索が役に立たないシナリオもあるので、先に進む前に、その機能を利用できるコンテンツがあることを確認してください。 セマンティック検索の言語モデルは、情報が豊富で、散文として構造化された検索可能なコンテンツに最適です。 たとえば、コンテンツで回答を評価するとき、モデルによって回答のように見える逐語的文字列がスキャンされて抽出されますが、クエリへの回答として、または一致するドキュメントに関するキャプションとして、新しい文字列が作成されることはありません。 "what car has the best gas mileage" (最も燃費のよい自動車は何か) という質問に答えるには、インデックスに "Hybrid cars offer the best gas mileage of any cars on the market" (ハイブリッド カーは、市場のどの自動車より燃費がよい) のような語句が含まれている必要があります。

セマンティック検索では、ドキュメント内またはドキュメントのコーパス内のさまざまなコンテンツからの情報を、関連付けたり推論したりすることはできません。 たとえば、「砂漠にあるリゾート ホテル」という地理的な入力のないクエリがあった場合、アリゾナ州やネバダ州にはどちらも砂漠がありますが、それらの州にあるホテルの一致は生成されません。 同様に、クエリに「過去 5 年間」という句が含まれている場合でも、エンジンが現在の日付に基づいて期間を計算して返すことはありません。 Cognitive Search では、上記のようなシナリオに役立つ可能性のあるメカニズムとして、外見上は異なる用語間の関連性を構築できる[シノニム マップ](search-synonyms.md)や、OData 式として指定された[日付フィルター](search-query-odata-filter.md)などがあります。

## <a name="availability-and-pricing"></a>可用性と料金

セマンティック検索は[サインアップ登録](https://aka.ms/SemanticSearchPreviewSignup)をすることで使用できます。 一度サインアップすれば、セマンティック検索とスペル チェックの両方を使用できます。

| 機能 | レベル | リージョン | サインアップ | 価格 |
|---------|------|--------|---------------------|-------------------|
| セマンティック検索 (キャプション、ハイライト、回答) | スタンダード レベル (S1、S2、S3) | 米国中北部、米国西部、米国西部 2、米国東部 2、北ヨーロッパ、西ヨーロッパ | 必須 | [Cognitive Search の価格ページ](https://azure.microsoft.com/pricing/details/search/)  |
| スペル チェック | Any | 米国中北部、米国西部、米国西部 2、米国東部 2、北ヨーロッパ、西ヨーロッパ | 必須 | なし (無料) |

セマンティック検索を利用せずにスペル チェックだけを使用する場合は無料です。 セマンティック検索の料金は、`queryType=semantic` を含む、検索文字列が空でないクエリ要求 (たとえば `search=pet friendly hotels in new york`) を使用した場合に発生します。 空の検索 (`search=*` であるクエリ) は、queryType が `semantic` に設定されている場合であっても、課金されません。

検索サービスでセマンティック検索機能が必要ない場合は、予想外の使用と課金を避けるため、[セマンティック検索を無効にする](/rest/api/searchmanagement/2021-04-01-preview/services/create-or-update#searchsemanticsearch)ことができます。

## <a name="next-steps"></a>次のステップ

[新規登録](https://aka.ms/SemanticSearchPreviewSignup)し、前のセクションで注記したサービス レベルとリージョンの要件を満たす検索サービスのプレビュー版を申し込みます。

要求の処理には、最大で 2 営業日かかります。 サービスの準備ができたら、[セマンティック クエリを作成](semantic-how-to-query-request.md)して、実際のコンテンツでパフォーマンスを評価します。
