---
title: Azure での共有イメージに関する問題のトラブルシューティング
description: 共有イメージ ギャラリーに関する問題のトラブルシューティングを行う方法について説明します。
author: olayemio
ms.service: virtual-machines
ms.subservice: imaging
ms.topic: troubleshooting
ms.workload: infrastructure
ms.date: 10/27/2020
ms.author: olayemio
ms.reviewer: cynthn
ms.openlocfilehash: 18b980a868173b1fa721f9fc0986d7e1efb203af
ms.sourcegitcommit: 99955130348f9d2db7d4fb5032fad89dad3185e7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2020
ms.locfileid: "93348918"
---
# <a name="troubleshooting-shared-image-galleries-in-azure"></a>Azure の共有イメージ ギャラリーのトラブルシューティング

共有イメージ ギャラリー、イメージ定義、およびイメージ バージョンで任意の操作を実行しているときに問題が発生した場合は、デバッグ モードでエラー コマンドを再実行します。 CLI では `--debug` スイッチ、PowerShell では `-Debug` スイッチを渡すことで、デバッグ モードがアクティブ化されます。 エラーの場所を特定したら、このドキュメントに従ってエラーをトラブルシューティングします。


## <a name="issues-with-creating-or-modifying-a-gallery"></a>ギャラリーの作成または変更に関する問題 ##

" *ギャラリー名が無効です。許可されている文字はアンダースコアを含む、合計 80 文字までの英数字で、間にピリオドを使用できます。ダッシュを含むその他の特殊文字はすべて許可されません。* "  
**原因** :ギャラリーに指定された名前が、名前付けの要件を満たしていません。  
**回避策** :次の条件に一致する名前を選択します: 1) 80 文字に制限されている。2) 英字、数字、アンダースコア、ピリオドのみが含まれる。3) 先頭と末尾が英字または数字である。

" *その検証規則によると、エンティティ名 'galleryName' は無効です: ^[^\_\W][\w-.\_]{0,79}(?<![-.])$。* "  
**原因** :ギャラリー名が名前付けの要件を満たしていません。  
**回避策** :次の条件を満たすギャラリーの名前を選択します: 1) 80 文字に制限されている。2) 英字、数字、アンダースコア、ピリオドのみが含まれる。3) 先頭と末尾が英字または数字である。

" *指定されたリソース名 <galleryName\> の末尾に、次の無効な文字が含まれています: <character\>。名前の末尾を次の文字にすることはできません: <character\>* "  
**原因** :ギャラリー名の末尾がピリオドまたはアンダースコアになっています。  
**回避策** :次の条件を満たすギャラリーの名前を選択します: 1) 80 文字に制限されている。2) 英字、数字、アンダースコア、ピリオドのみが含まれる。3) 先頭と末尾が英字または数字である。

" *指定された場所 <region\> は、リソースの種類 'Microsoft.Compute/galleries' では使用できません。リソースの種類に使用できるリージョンの一覧は ...* "  
**原因** :ギャラリーに対して指定されたリージョンが正しくないか、アクセス要求が必要です。  
**回避策** :リージョン名のスペルが正しいことを確認します。 このコマンドを実行して、アクセス権のあるリージョンを確認できます。 このリージョンが一覧に表示されていない場合は、[アクセス要求](/troubleshoot/azure/general/region-access-request-process)を送信します。

" *入れ子になっているリソースを削除する前にリソースを削除することはできません。* "  
**原因** :少なくとも 1 つの既存のイメージ定義を含むギャラリーを削除しようとしました。 ギャラリーは削除する前に空にしておく必要があります。  
**回避策** :ギャラリー内のすべてのイメージ定義を削除してから、ギャラリーの削除に進みます。 イメージ定義にイメージ バージョンが含まれている場合は、イメージ定義を削除する前に、イメージ バージョンを削除する必要があります。

" *リソース <galleryName\> は、場所 <region\_1\> のリソース グループ <resourceGroup\> に既に存在します。場所 <region\_2\> に同じ名前のリソースを作成することはできません。新しいリソース名を選択してください。* "  
**原因** :同じ名前のリソース グループに既に既存のギャラリーがあり、別のリージョンに同じ名前のギャラリーを作成しようとしました。  
**回避策** :別のギャラリーまたは別のリソース グループを使用します。

## <a name="issues-with-creating-or-modifying-image-definitions"></a>イメージ定義の作成または変更に関する問題 ##

" *プロパティ 'galleryImage.properties.<property\>' の変更は許可されていません。* "  
**原因** :OS の種類、OS の状態、Hyper-V の世代、プラン、公開元、SKU を変更しようとしました。 これらのプロパティはいずれも変更することはできません。  
**回避策** :代わりに、新しいイメージ定義を作成します。

" *リソース <galleryName/imageDefinitionName\> は、場所 <region\_1\> のリソース グループ<resourceGroup\> に既に存在します。場所 <region\_2\> に同じ名前のリソースを作成することはできません。新しいリソース名を選択してください。* "  
**原因** :同じギャラリーと同じ名前のリソース グループに既存のイメージ定義が既にあり、別のリージョンの同じギャラリーに同じ名前で別のイメージ定義を作成しようとしました。  
**回避策** :イメージ定義に別の名前を使用するか、イメージ定義を別のギャラリーまたはリソース グループに配置します

" *指定されたリソース名 <galleryName\>/<imageDefinitionName\> の末尾に、次の無効な文字が含まれています: <character\>。名前の末尾を次の文字にすることはできません: <character\>* "  
**原因** :指定された <imageDefinitionName\> の末尾がピリオドまたはアンダースコアになっています。  
**回避策** :次の条件を満たすイメージ定義の名前を選択します: 1) 80 文字に制限されている。2) 英字、数字、ハイフン、アンダースコア、ピリオドのみが含まれる。3) 先頭と末尾が英字または数字である。

" *その検証規則によると、エンティティ名 <imageDefinitionName\> は無効です: ^[^\_\\W][\\w-.\_]{0,79}(?<![-.])$* "  
**原因** :指定された <imageDefinitionName\> の末尾がピリオドまたはアンダースコアになっています。  
**回避策** :次の条件を満たすイメージ定義の名前を選択します: 1) 80 文字に制限されている。2) 英字、数字、ハイフン、アンダースコア、ピリオドのみが含まれる。3) 先頭と末尾が英字または数字である。

" *資産名 galleryImage.properties.identifier.<property\> が有効ではありません。空にすることはできません。許可されている文字は、大文字または小文字、数字、ハイフン (-)、ピリオド (.)、アンダースコア (\_) です。名前の末尾にピリオド (.) を使用することはできません。名前の長さは、<number\> 文字を超えることはできません。* "  
**原因** :指定された公開元、プランまたは SKU の値が、名前付けの要件を満たしていません。  
**回避策** :次の条件を満たす値を選択します: 1) 公開元が 128 文字に制限されているか、プランおよび SKU が 64 文字に制限されている。2) 英字、数字、ハイフン、アンダースコア、ピリオドのみが含まれる。3) 末尾がピリオドではない。

" *ネストされたリソースに対して要求された操作を実行できません。親リソース <galleryName\> が見つかりません。* "  
**原因** :現在のサブスクリプションとリソース グループに <galleryName\> という名前のギャラリーがありません。  
**回避策** :ギャラリー、サブスクリプション、およびリソース グループの名前が正しいことを確認します。 それ以外の場合は、<galleryName\> という名前の新しいギャラリーを作成します。

" *指定された場所 <region\> は、リソースの種類 'Microsoft.Compute/galleries' では使用できません。リソースの種類に使用できるリージョンの一覧は ...* "  
**原因** :<region\> が正しくないか、アクセス要求が必要です  
**回避策** :リージョン名のスペルが正しいことを確認します。 このコマンドを実行して、アクセス権のあるリージョンを確認できます。 このリージョンが一覧に表示されていない場合は、[アクセス要求](/troubleshoot/azure/general/region-access-request-process)を送信します。

" *値 <value\> を型 'iso-8601' としてシリアル化できません。ISO8601Error: ISO 8601 時間指定子 'T' が欠落しています。datetime 文字列 <value\> を解析できません* "  
**原因** :プロパティに指定された値が、日付として適切に書式設定されていません。  
**回避策** :yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:sszzz または [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) の有効な形式で日付を指定します。

" *文字列を DateTimeOffset <value\> に変換できませんでした。パス 'properties.<property\>'* "  
**原因** :プロパティに指定された値が、日付として適切に書式設定されていません。  
**回避策** :yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:sszzz または [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) の有効な形式で日付を指定します。

" *EndOfLifeDate は、未来の日付に設定する必要があります。* "  
**原因** :有効期間の終了日のプロパティが、今日の日付より後の日付として適切に書式設定されていません。  
**回避策** :yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:sszzz または [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) の有効な形式で日付を指定します。

" *引数 --<property\>: 無効な int 値: <value\>* "  
**原因** : <property\> で整数値のみが受け入れられ、<value\> が整数ではありません。  
**回避策** :整数値を選択します。

" *<property\> の最小値は <property\> の最大値より大きくすることはできません。* "  
**原因** :<property\> に指定された最小値が、<property\> に指定された最大値を超えています。  
**回避策** :最小値が最大値以下になるように値を変更します。

" *ギャラリー イメージ: (公開元: <Publisher\>、プラン: <Offer\>、sku: <SKU\>) で識別された <imageDefinitionName\> は既に存在します。別の公開元、プラン、sku の組み合わせを選択してください。* "  
**原因** :同じギャラリーに、既存のイメージ定義と公開元、プラン、SKU の 3 つが同じである新しいイメージ定義を作成しようとしました。  
**回避策** :特定のギャラリー内では、すべてのイメージ定義に公開元、プラン、SKU の一意の組み合わせが必要です。 一意の組み合わせを選択するか、新しいギャラリーを選択して、イメージ定義をもう一度作成します。

" *入れ子になっているリソースを削除する前にリソースを削除することはできません。* "  
**原因** :イメージ バージョンを含むイメージ定義を削除しようとしました。 イメージ定義は削除する前に空にしておく必要があります。  
**回避策** :イメージ定義内のすべてのイメージ バージョンを削除してから、イメージ定義の削除に進みます。

" *パラメーター <property\> をバインドできません。値 <value\> を型 <propertyType\> に変換できません。識別子名 <value\> を有効な列挙子名と一致させることができません。次の列挙子名のいずれかを指定して、もう一度やり直してください: <choice1\>、<choice2\> など* "  
**原因** :プロパティに使用可能な値の制限一覧があり、<value\> が含まれていません。  
**回避策** :使用可能な <choice\> 値のいずれかを選択します。

" *パラメーター <property\> をバインドできません。値 <value\> を型 &quot;System.DateTime&quot; に変換できません* "  
**原因** :プロパティに指定された値が、日付として適切に書式設定されていません。  
**回避策** :yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:sszzz または [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) の有効な形式で日付を指定します。

" *パラメーター <property\> をバインドできません。値 <value\> を型 &quot;System.Int32&quot; に変換できません* "  
**原因** : <property\> で整数値のみが受け入れられ、<value\> が整数ではありません。  
**回避策** :整数値を選択します。

" *このリージョンでは、ZRS ストレージ アカウントの種類はサポートされていません。* "  
**原因** :Standard ZRS がまだサポートされていないリージョンでそれを選択しました。  
**回避策** :ストレージ アカウントの種類を 'Premium\_LRS' または 'Standard\_LRS' に変更します。 該当するドキュメントで、ZRS プレビューが有効になっている最新の[リージョンの一覧](/azure/storage/common/storage-redundancy#zone-redundant-storage)を確認してください。

## <a name="issues-with-creating-or-updating-image-versions"></a>イメージ バージョンの作成または更新に関する問題 ##

" *指定された場所 <region\> は、リソースの種類 'Microsoft.Compute/galleries' では使用できません。リソースの種類に使用できるリージョンの一覧は ...* "  
**原因** :<region\> が正しくないか、アクセス要求が必要です  
**回避策** :リージョン名のスペルが正しいことを確認します。 このコマンドを実行して、アクセス権のあるリージョンを確認できます。 このリージョンが一覧に表示されていない場合は、[アクセス要求](/troubleshoot/azure/general/region-access-request-process)を送信します。

" *ネストされたリソースに対して要求された操作を実行できません。親リソース <galleryName/imageDefinitionName\> が見つかりません。* "  
**原因** :現在のサブスクリプションとリソース グループに <galleryName/imageDefinitionName\> という名前のギャラリーがありません。  
**回避策** :ギャラリー、サブスクリプション、およびリソース グループの名前が正しいことを確認します。 それ以外の場合は、示されたリソース グループに、<galleryName\> という名前の新しいギャラリーと <imageDefinitionName\> という名前のイメージ定義、またはそのいずれかを作成します。

" *パラメーター <property\> をバインドできません。値 <value\> を型 &quot;System.DateTime&quot; に変換できません* "  
**原因** :プロパティに指定された値が、日付として適切に書式設定されていません。  
**回避策** :yyyy-MM-dd、yyyy-MM-dd'T'HH:mm:sszzz または [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) の有効な形式で日付を指定します。

" *パラメーター <property\> をバインドできません。値 <value\> を型 &quot;System.Int32&quot; に変換できません* "  
**原因** : <property\> で整数値のみが受け入れられ、<value\> が整数ではありません。  
**回避策** :整数値を選択します。

" *ギャラリー イメージ バージョンの公開プロファイル リージョン<publishingRegions\> には、イメージ バージョンの場所 <sourceRegion\> が含まれている必要があります* "  
**原因** :ソース イメージの場所 (<sourceRegion\>) は <publishingRegions\> 一覧に含まれている必要があります  
**回避策** :<publishingRegions\> 一覧に < sourceRegion\> を含めます。

" *パラメーター <property\> の値 <value\> が範囲外です。値は <minValue\> と <maxValue\> の間 (両端を含む) である必要があります。* "  
**原因** : <value\> が <property\> に指定できる値の範囲外です。  
**回避策** :<minValue\> と <maxValue\> の範囲内 (両端を含む) の値を選択します。

" *ソース <resourceID\> が見つかりません。ソースが存在し、作成されているギャラリー イメージ バージョンと同じリージョンにあることを確認してください。* "  
**原因** :<resourceID\> にソースがないか、<resourceID\> にあるソースが作成されているギャラリー イメージと同じリージョンにありません。  
**回避策** :<resourceID\> が正しいことと、ギャラリー イメージ バージョンのソース リージョンが <resourceID\> のリージョンと同じであることを確認してください

" *プロパティ 'galleryImageVersion.properties.storageProfile.<diskImage\>.source.id' を変更することは許可されていません。* "  
**原因** :ギャラリー イメージ バージョンのソース ID は、作成後に変更することはできません。  
**回避策** :確実にソース ID が既に存在するソース ID と同じになるようにするか、イメージ バージョンのバージョン番号を変更します。

" *入力データ ディスクで重複する LUN 番号が検出されました。LUN 番号は、データ ディスクごとに一意である必要があります。* "  
**原因** :ディスクとディスク スナップショット、またはそのいずれかの一覧を使用してイメージ バージョンを作成する場合、2 つ以上のディスクまたはディスク スナップショットの LUN 番号が同じになります。  
**回避策** :重複する LUN 番号を削除または変更します。

" *入力ディスクに重複するソース ID があります。ソース ID は、ディスクごとに一意である必要があります。* "  
**原因** :ディスクとディスク スナップショット、またはそのいずれかの一覧を使用してイメージ バージョンを作成する場合、2 つ以上のディスクまたはディスク スナップショットのリソース ID が同じになります。  
**回避策** :重複するディスク ソース ID を削除または変更します。

" *パス 'properties.storageProfile.<diskImages\>.source.id' にあるプロパティ ID <resourceID\> が無効です。'/subscriptions/{subscriptionId}' または '/providers/{resourceProviderNamespace}/' で始まる完全修飾リソース ID を指定してください。* "  
**原因** :<resourceID\> の書式設定が正しくありません。  
**回避策** :resourceID が正しいことを確認します。

" *ソース ID: <resourceID\> は、マネージド イメージ、仮想マシンまたは別のギャラリー イメージ バージョンである必要があります* "  
**原因** :<resourceID\> の書式設定が正しくありません。  
**回避策** :ソース イメージとして VM、マネージド イメージまたはギャラリー イメージ バージョンを使用する場合は、VM、マネージド イメージ、またはギャラリー イメージ バージョンのリソース ID が正しいことを確認します。

" *ソース ID: <resourceID\> はマネージド ディスクまたはスナップショットである必要があります。* "  
**原因** :<resourceID\> の書式設定が正しくありません。  
**回避策** :イメージ バージョンのソースとしてディスクとディスク スナップショットまたはそのいずれかを使用する場合は、ディスクとディスク スナップショットまたはそのいずれかのリソース ID が正しいことを確認します。

" *親ギャラリー イメージの OS 状態 (<OsState\_1\>) が <OsState\_2\> ではないため、<resourceID\> からギャラリー イメージ バージョンを作成できません。* "  
**原因** :オペレーティング システムの状態 (一般化または特殊化) が、イメージ定義に指定されているオペレーティング システムの状態と一致しません。  
**回避策** :オペレーティング システムの状態が <OsState\_1\> の VM に基づいてソースを選択するか、<OsState\_2\> に基づいて VM の新しいイメージ定義を作成します。

" *ID '<resourceID\>' のリソースに、親ギャラリー イメージのハイパーバイザー世代 ['<V#\_2\>'] とは異なるハイパーバイザー世代 ['<V#\_1\>'] があります。* "  
**原因** :イメージ バージョンのハイパーバイザー世代が、イメージ定義で指定されているハイパーバイザー世代と一致しません。 イメージ定義のオペレーティング システムが <V#\_1\> で、イメージ バージョンのオペレーティング システムが <V#\_2\> です。  
**回避策** :イメージ定義と同じハイパーバイザー世代のソースを選択するか、イメージ バージョンと同じハイパーバイザー世代の新しいイメージ定義を作成または選択します。

" *ID '<resourceID\>' のリソースに、親ギャラリー イメージの OS の種類の世代 ['<V#\_2\>'] とは異なる OS の種類 ['<V#\_1\>'] があります。* "  
**原因** :イメージ バージョンのハイパーバイザー世代が、イメージ定義で指定されているハイパーバイザー世代と一致しません。 イメージ定義のオペレーティング システムが <OsType\_1\> で、イメージ バージョンのオペレーティング システムが <OsType\_2\> です。  
**回避策** :イメージ定義と同じオペレーティング システム (Linux または Windows) のソースを選択するか、イメージ バージョンと同じオペレーティング システム世代の新しいイメージ定義を作成または選択します。

" *ソース仮想マシン <resourceID\> には、エフェメラル OS ディスクを含めることはできません。* "  
**原因** :'<resourceID\>' のソースにエフェメラル OS ディスクが含まれています。 Shared Image Gallery では現在、エフェメラル OS ディスクはサポートされていません。  
**回避策** :エフェメラル OS ディスクを使用しない VM に基づいて、別のソースを選択してください。

" *ソース仮想マシン <resourceID\> には、UltraSSD という種類のアカウントに格納されているディスク ['<diskID\>'] を含めることはできません。* "  
**原因** :ディスク '<diskID\> は UltraSSD ディスクです。 Shared Image Gallery では現在、Ultra SSD ディスクはサポートされていません。  
**回避策** :Premium SSD、Standard SSD および Standard HDD マネージド ディスクまたはそのいずれかのみを含むソースを使用します。

" *ソース仮想マシン<resourceID\> は Managed Disks から作成する必要があります。* "  
**原因** :<resourceID\> の仮想マシンでアンマネージド ディスクが使用されています。  
**回避策** :Premium SSD、Standard SSD および Standard HDD マネージド ディスクまたはそのいずれかのみを含む VM に基づいてソースを使用します。

" *ソース '<resourceID\>' に対する要求が多すぎます。ソースに対する要求の数を減らすか、しばらく待ってから再試行してください。* "  
**原因** :このイメージ バージョンのソースは要求が多すぎるため、現在調整されています。  
**回避策** :後でイメージ バージョンを作成してみてください。

" *ディスク暗号化セット '<diskEncryptionSetID\>' は、ギャラリー リソースと同じサブスクリプション '<subscriptionID\>' に存在する必要があります。* "  
**原因** :ディスク暗号化セットは、それが作成されたのと同じサブスクリプションおよびリージョンでのみ使用できます。  
**回避策** :イメージ バージョンと同じサブスクリプションおよびリージョンで暗号化セットを作成または使用します

" *暗号化されたソース: '<resourceID\>' が、現在のギャラリー イメージ バージョンのサブスクリプション '<subscriptionID\_1\>' とは異なるサブスクリプション ID にあります。暗号化されていないソースで再試行するか、ソースのサブスクリプション '<subcriptionID\_2\>' を使用してギャラリー イメージ バージョンを作成してください。* "  
**原因** :Shared Image Gallery では現在、ソース イメージが暗号化されている場合、別のソース イメージからの別のサブスクリプションでのイメージ バージョンの作成はサポートされていません。  
**回避策** :暗号化されていないソースを使用するか、ソースと同じサブスクリプションでイメージ バージョンを作成します。

" *ディスク暗号化セット <diskEncryptionSetID\> が見つかりませんでした。* "  
**原因** :ディスクの暗号化が正しくない可能性があります。  
**回避策** :ディスク暗号化セットのリソース ID が正しいことを確認してください。

" *イメージ バージョン名が無効です。イメージ バージョン名では、Major(int).Minor(int).Patch(int) という形式に従う必要があります。例: 1.0.0、2018.12.1 など* "  
**原因** :イメージ バージョンの有効な形式は、ピリオドで区切られた 3 つの整数です。 イメージ バージョン名が有効な形式を満たしていませんでした。  
**回避策** :Major(int).Minor(int).Patch(int) という形式に従ったイメージ バージョン名を使用します。例: 1.0.0 または 2018.12.1。

" *パラメーター galleryArtifactVersion.properties.publishingProfile.targetRegions.encryption.dataDiskImages.diskEncryptionSetId の値が無効です* "  
**原因** :データ ディスク イメージで使用されているディスク暗号化セットのリソース ID に無効な形式が使用されています。  
**回避策** :ディスク暗号化セットのリソース ID が確実に、/subscriptions/<subscriptionID\>/resourceGroups/<resourceGroupName\>/providers/Microsoft.Compute/<diskEncryptionSetName\> という形式に従うようにします。

" *パラメーター galleryArtifactVersion.properties.publishingProfile.targetRegions.encryption.osDiskImage.diskEncryptionSetId の値が無効です。* "  
**原因** :OS ディスク イメージで使用されているディスク暗号化セットのリソース ID に無効な形式が使用されています  
**回避策** :ディスク暗号化セットのリソース ID が確実に、/subscriptions/<subscriptionID\>/resourceGroups/<resourceGroupName\>/providers/Microsoft.Compute/<diskEncryptionSetName\> という形式に従うようにします。

" *ギャラリー イメージ バージョンの更新を要求する場合、リージョン [<region\>] にディスク暗号化セットを使用して新しいデータ ディスク イメージの暗号化 LUN [<number\>] を指定することはできません。このバージョンを更新するには、新しい LUN を削除します。データ ディスク イメージの暗号化設定を変更する必要がある場合は、正しい設定で新しいギャラリー イメージ バージョンを作成する必要があります。* "  
**原因** :既存のイメージ バージョンのデータ ディスクに暗号化が追加されました。 既存のイメージ バージョンに暗号化を追加することはできません。  
**回避策** :新しいギャラリー イメージ バージョンを作成するか、追加された暗号化設定を削除します。

" *ギャラリー成果物のバージョン ソースは、storageProfile で直接、あるいは個々の OS またはデータ ディスク内でのみ指定できます。1 つのソースの種類 (ユーザー イメージ、スナップショット、ディスク、仮想マシン) のみを指定できます。* "  
**原因** :ソース ID が欠落しています。  
**回避策** :必ず、ソースのソース ID が存在するようにしてください。

" *リソースが見つかりませんでした: <resourceID\>。ソースが存在することを確認してください。* "  
**原因** :ソースの resourceID が正しくない可能性があります。  
**回避策** :必ず、ソースの resourceID が正しくなるようにしてください。

" *ディスク暗号化セット '<diskEncryptionSetID\>' がリージョン '<Region\_2\>' の対応するディスクに使用されているため、ターゲット リージョン '<Region\_1\>' のディスク 'galleryArtifactVersion.properties.publishingProfile.targetRegions.encryption.osDiskImage.diskEncryptionSetId' にはディスク暗号化セットが必要です* "  
**原因** :暗号化は <Region\_2\> の OS ディスクで使用されていましたが、<Region\_1\> では使用されていません。  
**回避策** :OS ディスクで暗号化を使用する場合は、すべてのリージョンで暗号化を使用します。

" *ディスク暗号化セット '<diskEncryptionSetID\>' がリージョン '<Region\_2\>' の対応するディスクに使用されているため、ターゲット リージョン '<Region\_1\>' のディスク 'LUN <number\>' にはディスク暗号化セットが必要です* "  
**原因** :暗号化は <Region\_2\> の LUN <number\> のデータ ディスクで使用されていましたが、<Region\_1\> では使用されていません。  
**回避策** :データ ディスクで暗号化を使用する場合は、すべてのリージョンで暗号化を使用します。

" *無効な LUN [<number\>] が encryption.dataDiskImages に指定されました。LUN は次のいずれかの値である必要があります: ['0、9']。* "  
**原因** :暗号化に指定された LUN 番号が、VM に接続されているディスクのどの LUN 番号とも一致しません。  
**回避策** :暗号化の LUN 番号を、VM に存在するデータ ディスクの LUN 番号に変更します。

" *ターゲット リージョン '<region\>' encryption.dataDiskImages に重複する LUN '<number\>' が指定されました。* "  
**原因** :<region\> で使用されている暗号化設定で、LUN 番号が少なくとも 2 回指定されました。  
**回避策** :<region\> の LUN 番号を変更し、すべての LUN 番号が <region\> で一意であることを確認します。

" *OSDiskImage と DataDiskImage で同じ BLOB <sourceID\> を指定することはできません* "  
**原因** :OS ディスクと少なくとも 1 つのデータ ディスクのソースが一意ではありません。  
**回避策** :OS ディスクおよびデータ ディスク、またはそのいずれかのソースを変更し、OS ディスクと各データ ディスクが一意になるようにします。

" *ターゲットの公開リージョンで重複するリージョンは許可されません。* "  
**原因** :公開リージョンの一覧に含まれるリージョンが複数回表示されています。  
**回避策** :重複するリージョンを削除します。

" *新しいデータ ディスクを追加したり、既存のイメージ内のデータ ディスクの LUN を変更したりすることはできません。* "  
**原因** :イメージ バージョンの更新呼び出しに、新しいデータ ディスクが含まれているか、ディスクの新しい LUN 番号があります。  
**回避策** :既存のイメージ バージョンの LUN 番号とデータ ディスクを使用します。

" *ディスク暗号化セット <diskEncryptionSetID\> は、ギャラリー リソースと同じサブスクリプション <subscriptionID\> に存在する必要があります。* "  
**原因** :Shared Image Gallery では現在、別のサブスクリプションでのディスク暗号化セットの使用はサポートされていません。  
**回避策** :同じサブスクリプションにイメージ バージョンとディスク暗号化セットを作成します。

## <a name="issues-creating-or-updating-a-vm-or-scale-sets-from-image-version"></a>イメージ バージョンからの VM またはスケール セットの作成または更新に関する問題 ##

" *クライアントには、スコープ <resourceID\> でのアクション 'Microsoft.Compute/galleries/images/versions/read' を実行する権限がありますが、現在のテナント <tenantId1\> には、リンクされたサブスクリプション <subscriptionId2\> にアクセスする権限がありません。* "  
**原因** :仮想マシンまたはスケール セットは、別のテナントの SIG イメージを使用して作成されました。 仮想マシンまたはスケール セットを変更しようとしましたが、イメージを所有しているサブスクリプションへのアクセス権がありません。  
**回避策** :イメージ バージョンのサブスクリプションの所有者に連絡して、イメージ バージョンに対する読み取りアクセス権を付与するようにしてください。

" *<region\> リージョンでギャラリー イメージ <resourceID\> を使用できません。イメージ所有者に連絡して、このリージョンにレプリケートするか、要求されたリージョンを変更するようにしてください。* "  
**原因** :ギャラリー イメージの公開されたリージョンの一覧に含まれていないリージョンに VM が作成されています。  
**回避策** :イメージをリージョンにレプリケートするか、ギャラリー イメージの公開リージョンのいずれかのリージョンに VM を作成します。

" *パラメーター 'osProfile' は許可されていません。* "  
**原因** :特殊化されたイメージ バージョンから作成された VM に対して、管理者のユーザー名、パスワード、または ssh キーが指定されました。  
**回避策** :そのイメージから VM を作成する場合は、管理者のユーザー名、パスワード、ssh キーを含めないでください。 それ以外の場合は、一般化されたイメージ バージョンを使用し、管理者のユーザー名、パスワード、または ssh キーを指定します。

" *必須パラメーター 'osProfile' がありません (null)。* "  
**原因** :VM が一般化されたイメージから作成されており、管理者のユーザー名、パスワード、または ssh キーがありません。 一般化されたイメージには管理者のユーザー名、パスワード、ssh キーが保持されないため、これらのフィールドは VM またはスケールセットの作成時に指定する必要があります。  
**回避策** :管理者のユーザー名、パスワード、または ssh キーを指定するか、特殊化されたイメージ バージョンを使用します。

" *親ギャラリー イメージの OS 状態 ('特殊化') が '一般化' ではないため、<resourceID\> からギャラリー イメージ バージョンを作成できません。* "  
**原因** :イメージ バージョンは一般化されたソースから作成されていますが、その親定義は特殊化されています。  
**回避策** :特殊化されたソースを使用してイメージ バージョンを作成するか、一般化された親定義を使用します。

" *仮想マシン スケール セット <vmssName\> を更新できません。VM スケール セットの現在の OS 状態は一般化であり、これは更新後のギャラリー イメージの OS 状態の特殊化と異なるためです。* "  
**原因** :スケールセットの現在のソース イメージは一般化されたソース イメージですが、特殊化されたソース イメージで更新されています。 スケールセットの現在のソース イメージと新しいソース イメージは、同じ状態である必要があります。  
**回避策** :スケールセットを更新するには、一般化されたイメージ バージョンを使用します。

" *共有イメージ ギャラリー <versionId\> のディスク暗号化セット <diskEncryptionSetId\> はサブスクリプション <subscriptionId1\> に属しており、サブスクリプション <subscriptionId2\> のリソース '' で使用することはできません* "  
**原因** :イメージ バージョンの暗号化に使用されるディスク暗号化セットが、イメージ バージョンをホストするサブスクリプションとは別のサブスクリプションに存在します。  
**回避策** :イメージ バージョンとディスク暗号化セットに同じサブスクリプションを使用します。

" *VM または仮想マシン スケール セットの作成に長い時間がかかる。* "  
**回避策** :VM または仮想マシン スケール セットの作成を試行している元のイメージ バージョンの **OSType** が、イメージ バージョンの作成に使用したソースの **OSType** と同じであることを確認します。 

## <a name="issues-creating-a-disk-from-an-image-version"></a>イメージ バージョンからのディスクの作成に関する問題 ##

" *パラメーター imageReference の値が無効です。* "  
**原因** :SIG イメージ バージョンからディスクにエクスポートしようとしましたが、そのイメージには存在しない LUN の位置が使用されています。    
**回避策** :イメージ バージョンを確認して、使用されている LUN の位置を確認します。

## <a name="unable-to-share-resources"></a>リソースを共有できない

サブスクリプション全体での共有イメージ ギャラリー、イメージ定義、およびイメージ バージョンのリソースの共有が、[Azure ロールベースのアクセス制御](../role-based-access-control/rbac-and-directory-admin-roles.md) (Azure RBAC) を使用して有効化されています。 

## <a name="replication-is-slow"></a>レプリケーションが遅い

**-expand ReplicationStatus** フラグを使用して、指定されたすべてのターゲット リージョンへのレプリケートが完了済みかどうかを確認します。 完了していない場合、ジョブが完了するまで最大 6 時間待機します。 レプリケートがエラーになった場合、コマンドをもう一度トリガーし、イメージ バージョンを作成してレプリケートします。 イメージ バージョンのレプリケート先となるターゲット リージョンが多数ある場合、段階的にレプリケーションを行うことを検討します。

## <a name="azure-limits-and-quotas"></a>Azure の制限とクォータ 

[Azure の制限とクォータ](../azure-resource-manager/management/azure-subscription-service-limits.md)は、すべての共有イメージ ギャラリー、イメージ定義、およびイメージ バージョンのリソースに適用されます。 お使いのサブスクリプションの制限内であることを確認してください。 


## <a name="next-steps"></a>次のステップ

詳細については、[共有イメージ ギャラリー](./linux/shared-image-galleries.md)に関するページを参照してください。