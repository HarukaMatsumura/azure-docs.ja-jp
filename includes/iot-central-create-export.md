---
title: インクルード ファイル
description: インクルード ファイル
services: iot-central
author: dominicbetts
ms.service: iot-central
ms.topic: include
ms.date: 10/20/2021
ms.author: dobett
ms.custom: include file
ms.openlocfilehash: a686ab26c93130d7371bcf2435dccbd7aaa1c985
ms.sourcegitcommit: 106f5c9fa5c6d3498dd1cfe63181a7ed4125ae6d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/02/2021
ms.locfileid: "131070411"
---
データのエクスポート先を準備したので、IoT Central アプリケーションでデータのエクスポートを設定します。

1. ご使用の IoT Central アプリケーションにサインインします。

1. 左側のペインで、 **[データのエクスポート]** を選択します。

    > [!Tip]
    > 左側のペインに **[データのエクスポート]** が表示されない場合は、アプリでデータ エクスポートを構成するアクセス許可がありません。 データ エクスポートの設定について、管理者に問い合わせてください。

1. **[+ 新しいエクスポート]** を選択します。

1. 新しいエクスポートの表示名を入力し、データ エクスポートが **[有効]** になっていることを確認します。

1. エクスポートするデータの種類を選択します。 次の表は、サポートされるデータ エクスポートの型の一覧を示します。

    | データ型 | 説明 | データ形式 |
    | :------------- | :---------- | :----------- |
    |  テレメトリ | デバイスからのテレメトリ メッセージがほぼリアルタイムでエクスポートされます。 エクスポートされた各メッセージには、元のデバイス メッセージの完全な内容が正規化されて含まれます。   |  [テレメトリ メッセージの形式](#telemetry-format)   |
    | プロパティ変更 | デバイスとクラウドのプロパティに対する変更がほぼリアルタイムでエクスポートされます。 読み取り専用のデバイス プロパティでは、報告された値に対する変更がエクスポートされます。 読み取り/書き込みプロパティの場合、報告された値と必要な値の両方がエクスポートされます。 | [プロパティ変更メッセージの形式](#property-changes-format) |
    | デバイスの接続性 | デバイスの接続イベントと非接続イベントをエクスポートします。 | [デバイス接続メッセージの形式](#device-connectivity-changes-format) |
    | デバイスのライフサイクル | デバイスの登録、削除、プロビジョニング、有効化、無効化、displayNameChanged、および deviceTemplateChanged のイベントをエクスポートします。 | [デバイスのライフサイクル変更メッセージの形式](#device-lifecycle-changes-format) |
    | デバイス テンプレートのライフサイクル | created、updated、および deleted など、発行されたデバイス テンプレートの変更をエクスポートします。 | [デバイス テンプレートのライフサイクル変更メッセージの形式](#device-template-lifecycle-changes-format) |

1. 必要に応じて、フィルターを追加して、エクスポートするデータの量を減らします。 データ エクスポートの種類ごとに、使用できるフィルターの種類は異なります。<a name="DataExportFilters"></a>

    | データの種類 | 使用可能なフィルター|
    |--------------|------------------|
    |製品利用統計情報|<ul><li>デバイス名、デバイス ID、デバイス テンプレート、デバイスがシミュレートされているかどうかでフィルター処理します</li><li>フィルター条件を満たすテレメトリのみが含まれるようにストリームをフィルター処理します</li><li>フィルター条件に一致するプロパティを持つデバイスのテレメトリのみが含まれるようにストリームをフィルター処理します</li><li>フィルターストリームは、フィルター条件を満たす *メッセージプロパティ* を持つテレメトリだけを格納します。 "*メッセージ プロパティ*" ("*アプリケーション プロパティ*" とも呼ばれる) は、デバイス SDK を使用するデバイスから必要に応じて送信される各テレメトリ メッセージ上のキーと値ペアのバッグで送信されます。 メッセージ プロパティ フィルターを作成するには、検索するメッセージ プロパティ キーを入力し、条件を指定します。 指定したフィルター条件に一致するプロパティを持つテレメトリ メッセージのみがエクスポートされます。 [アプリケーション プロパティの詳細については、IoT Hub のドキュメントを参照してください](../articles/iot-hub/iot-hub-devguide-messages-construct.md) </li></ul>|
    |プロパティ変更|<ul><li>デバイス名、デバイス ID、デバイス テンプレート、デバイスがシミュレートされているかどうかでフィルター処理します</li><li>フィルター条件を満たすプロパティ変更のみが含まれるようにストリームをフィルター処理します</li></ul>|
    |デバイスの接続性|<ul><li>デバイス名、デバイス ID、デバイス テンプレート、組織、デバイスがシミュレートされているかどうかでフィルター処理します</li><li>フィルター条件に一致するプロパティを持つデバイスの変更のみが含まれるようにストリームをフィルター処理します</li></ul>|
    |デバイスのライフサイクル|<ul><li>デバイス名、デバイス ID、デバイス テンプレート、デバイスがプロビジョニング、有効化、またはシミュレートされているかどうかでフィルター処理します</li><li>フィルター条件に一致するプロパティを持つデバイスの変更のみが含まれるようにストリームをフィルター処理します</li></ul>|
    |デバイス テンプレートのライフサイクル|<ul><li>デバイス テンプレートでフィルター処理します</li></ul>|

1. 必要に応じて、余分なキーと値のペアのメタデータでエクスポートされたメッセージを強化します。 次のエンリッチメントは、テレメトリ、プロパティ変更、デバイスの接続性、デバイスのライフサイクルの各データ エクスポートの種類で使用できます。<a name="DataExportEnrichmnents"></a>
    - **カスタム文字列**: 各メッセージに静的なカスタム文字列を追加します。 任意のキーを入力し、任意の文字列値を入力します。
    - **プロパティ**: 各メッセージに追加されます。
       - デバイス名、デバイス テンプレート名、有効、組織、プロビジョニング済み、シミュレート済みなどのデバイス メタデータ。
       - 各メッセージに対してデバイスから報告された現在のプロパティまたはクラウド プロパティの値。 エクスポートされたメッセージが、指定したプロパティを持たないデバイスからのものである場合、エクスポートされたメッセージにはそのエンリッチメントがありません。
